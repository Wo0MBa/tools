<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Торговый Калькулятор</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            padding: 20px;
            margin: 0;
        }

        .main-container {
            width: 100%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h3 { margin-top: 0; color: #1a1a1a; font-size: 18px; }

        .input-group { margin-bottom: 15px; }
        
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 16px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th { text-align: left; padding: 8px; border-bottom: 2px solid #eee; color: #666; }
        td { padding: 8px; border-bottom: 1px solid #eee; }

        .profit { color: #27ae60; font-weight: bold; }

        /* Мини-калькулятор */
        .calc-screen {
            background: #f8f9fa;
            padding: 10px;
            text-align: right;
            font-size: 20px;
            border-radius: 6px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            min-height: 24px;
        }

        .calc-btns {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 6px;
            background: #e9ecef;
            cursor: pointer;
            font-size: 16px;
        }

        .btn:active { background: #dee2e6; }
        .btn.orange { background: #fd7e14; color: white; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="card">
        <h3>Курс Звезд (-14% комиссия)</h3>
        <div class="input-group">
            <label>Цена за 1 звезду (₽):</label>
            <input type="number" id="rateInput" value="1.5" step="0.1" oninput="updateTable()">
        </div>
        <table>
            <thead>
                <tr>
                    <th>Звезды</th>
                    <th>Сумма</th>
                    <th>Чистыми</th>
                </tr>
            </thead>
            <tbody id="starsTable">
                </tbody>
        </table>
    </div>

    <div class="card">
        <h3>Обычный калькулятор</h3>
        <div class="calc-screen" id="screen">0</div>
        <div class="calc-btns">
            <button class="btn" onclick="clearC()">C</button>
            <button class="btn" onclick="press('/')">/</button>
            <button class="btn" onclick="press('*')">×</button>
            <button class="btn" onclick="back()">←</button>

            <button class="btn" onclick="press('7')">7</button>
            <button class="btn" onclick="press('8')">8</button>
            <button class="btn" onclick="press('9')">9</button>
            <button class="btn orange" onclick="press('-')">-</button>

            <button class="btn" onclick="press('4')">4</button>
            <button class="btn" onclick="press('5')">5</button>
            <button class="btn" onclick="press('6')">6</button>
            <button class="btn orange" onclick="press('+')">+</button>

            <button class="btn" onclick="press('1')">1</button>
            <button class="btn" onclick="press('2')">2</button>
            <button class="btn" onclick="press('3')">3</button>
            <button class="btn orange" onclick="equal()">=</button>

            <button class="btn" style="grid-column: span 2" onclick="press('0')">0</button>
            <button class="btn" onclick="press('.')">.</button>
        </div>
    </div>
</div>

<script>
    const starsList = [50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 1000, 5000];
    const fee = 0.14;

    function updateTable() {
        const rate = parseFloat(document.getElementById('rateInput').value) || 0;
        const tbody = document.getElementById('starsTable');
        tbody.innerHTML = '';

        starsList.forEach(amt => {
            const total = amt * rate;
            const net = total * (1 - fee);
            tbody.innerHTML += `
                <tr>
                    <td>${amt} ⭐</td>
                    <td>${total.toFixed(2)} ₽</td>
                    <td class="profit">${net.toFixed(2)} ₽</td>
                </tr>`;
        });
    }

    // Логика калькулятора
    let exp = "";
    const screen = document.getElementById('screen');

    function press(val) {
        exp += val;
        screen.innerText = exp;
    }

    function clearC() {
        exp = "";
        screen.innerText = "0";
    }

    function back() {
        exp = exp.slice(0, -1);
        screen.innerText = exp || "0";
    }

    function equal() {
        try {
            exp = eval(exp).toString();
            screen.innerText = exp;
        } catch {
            screen.innerText = "Ошибка";
            exp = "";
        }
    }

    updateTable();
</script>

</body>
</html>
